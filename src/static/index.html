<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="color-scheme" content="dark">
    <meta name="theme-color" content="#000000">
    <title>vCHAOS</title>

    <!-- Live2D & PixiJS Libraries -->
    <script src="/static/js/live2dcubismcore.min.js"></script>
    <script src="/static/js/live2d.min.js"></script>
    <script src="/static/js/pixi.min.js"></script>
    <script src="/static/js/index.min.js"></script>

    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="icon" href="/static/img/icon.png" type="image/png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/img/apple-touch-icon.png">
    <link rel="manifest" href="/static/manifest.json">
</head>
<body>
    <div class="top-left-container">
        <button id="wsStatus" class="disconnected">Disconnected</button>
        <button id="responseStatus" class="status-idle">Idle</button>
    </div>

    <div class="top-right-container">
        <audio id="audioPlayer" controls autoplay>
            <source id="audioSource" src="" type="audio/wav">
            Your browser does not support the audio element.
        </audio>
    </div>

    <div class="canvas-container">
        <canvas id="canvas"></canvas>
    </div>

    <button id="closeSidebar" class="hidden">‚úñ</button>
    <div class="sidebar hidden" id="historySidebar">
        <h3>Chat History</h3>
        
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search for terms..." />
            <button id="searchButton">üîç</button>
        </div>
        <div id="historyList"></div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="hidden">
        <div class="modal-container">
            <h3>Settings</h3>

            <div class="settings-option">
                <label for="showSentPrompts">Show Sent Prompts ></label>
                <label class="toggle-switch">
                    <input type="checkbox" id="showSentPrompts">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="settings-option">
                <label for="enableTextRepeat">Enable Text Repeat ></label>
                <label class="toggle-switch">
                    <input type="checkbox" id="enableTextRepeat">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="settings-option">
                <label for="enableMouthScaling">Enable Mouth Scaling ></label>
                <label class="toggle-switch">
                    <input type="checkbox" id="enableMouthScaling">
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="settings-option">
                <label for="timeoutInput">Timeout (seconds) ></label>
                <input type="number" id="timeoutInput" min="30" max="600" step="10">
            </div>

            <div class="settings-option">
                <label for="modelInput">Model Path ></label>
                <input type="text" id="modelInput">
            </div>

            <div class="modal-buttons">
                <button id="applySettings">Apply</button>
                <button id="cancelSettings">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Connected Clients Modal -->
    <div id="clientsModal" class="hidden">
        <div class="modal-container">
            <h3>Connected Clients</h3>
            <div id="clientsList"></div>
            <div class="modal-buttons">
                <button id="closeClients">Close</button>
            </div>
        </div>
    </div>

    <div class="bottom-wrapper">
        <button id="historyButton" class="history-icon">üìú</button>
        <button id="clientsButton" class="clients-icon">üíª</button>
        <button id="settingsButton" class="settings-icon">‚öôÔ∏è</button>
        <button id="repeatButton" class="repeat-icon hidden">üîÅ</button>
        <button id="voiceButton" class="voice-icon">üé§</button>
        <button id="textButton" class="text-icon">‚úèÔ∏è</button>
        <div class="bottom-container">
            <div class="fixed-bottom" id="fixedBottom">
                <p id="textDisplay"><strong>Latest Response:</strong> <span id="textOutput">Waiting for text...</span></p>
                <input type="text" id="userInput" class="hidden" placeholder="Type your prompt..." />
                <button id="sendButton" class="hidden">Send</button>
            </div>
        </div>
    </div>    

    <script src="/static/js/settings.js"></script>
    <script src="/static/js/init.js"></script>
    <script src="/static/js/textInput.js"></script>
    <script src="/static/js/voiceInput.js"></script>
    <script src="/static/js/chatHistory.js"></script>
    <script src="/static/js/clients.js"></script>
</body>
</html>
